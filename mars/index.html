<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mars – Alba Space</title>
  <link rel="icon" type="image/png" href="/favicon.png" />
  <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>

  <!-- Глобальные стили и include -->
  <link rel="stylesheet" href="/assets/css/site.css" />
  <script src="/assets/js/include.js" defer></script>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: url('/assets/images/space-bg.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
      opacity: 0;
      animation: fadeIn 0.8s ease-out forwards;
    }

    @keyframes fadeIn {
      to { opacity: 1; }
    }

    h1 {
      text-align: center;
      margin-top: 110px;
      margin-bottom: 15px;
      font-size: 32px;
      text-shadow: 0 0 15px #000;
    }

    .container {
      width: 90%;
      max-width: 1200px;
      margin: auto;
      padding-bottom: 50px;
      backdrop-filter: blur(2px);
    }

    p {
      text-align: center;
      font-size: 18px;
      text-shadow: 0 0 8px #000;
      max-width: 900px;
      margin: 20px auto;
    }

    model-viewer {
      width: 100%;
      height: 600px;
      margin-top: 30px;
      background: rgba(0, 0, 0, 0.65);
      border-radius: 12px;
      box-shadow: 0 0 30px rgba(0, 150, 255, 0.5);
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 26px;
        margin-top: 100px;
      }
      model-viewer {
        height: 420px;
      }
    }
  </style>
</head>

<body>
  <!-- Глобальный хедер -->
  <div data-include="/header-tr.html"></div>

  <main>
    <h1>Mars</h1>

    <div class="container">
      <p>
        Mars, ince atmosferi ve kızıl yüzeyiyle gelecekteki insanlı görevler için önemli bir hedeftir.
      </p>

      <!-- FUTURISTIC ALBASPACE LOADING OVERLAY -->
      <div id="loading-overlay">
        <div class="loader-card">
          <div class="loading-logo">
            <img src="/assets/images/albaspace-logo.png" alt="AlbaSpace Logo" />
            <span>ALBASPACE</span>
          </div>

          <div class="loader-orb">
            <div class="orb-ring"></div>
            <div class="orb-core"></div>
          </div>

          <p class="loading-text">
            Lütfen bekleyin, 3D model telefonunuza yükleniyor…
          </p>
          <p class="loading-subtext">
            Bu işlem internet hızınıza göre birkaç saniye sürebilir.
          </p>

          <div class="progress-shell">
            <div class="progress-bar">
              <div class="progress-fill"></div>
            </div>
            <div class="progress-glow"></div>
          </div>

          <div class="overlay-hint">
            AR &amp; 3D deneyimi hazırlanıyor
          </div>
        </div>
      </div>

      <model-viewer
        src="/assets/models/mars.glb"
        camera-controls
        auto-rotate
        ar
        ar-modes="webxr scene-viewer quick-look">
      </model-viewer>

    </div>
  </main>

  <!-- Глобальный футер -->
  <div data-include="/footer-tr.html"></div>

  <!-- ЛОГИКА ДЛЯ ПРЕЛОАДЕРА -->
  <script>
    window.addEventListener("DOMContentLoaded", () => {
      const viewer = document.querySelector("model-viewer");
      const overlay = document.getElementById("loading-overlay");
      const progressFill = document.querySelector(".progress-fill");

      if (!viewer || !overlay || !progressFill) return;

      const hideOverlay = () => {
        if (overlay.classList.contains("fade-out")) return;
        overlay.classList.add("fade-out");
        setTimeout(() => {
          if (overlay && overlay.parentNode) {
            overlay.parentNode.removeChild(overlay);
          }
        }, 550);
      };

      viewer.addEventListener("progress", (event) => {
        const total = event.detail && typeof event.detail.totalProgress === "number"
          ? event.detail.totalProgress
          : null;

        if (total !== null) {
          const percent = Math.max(0, Math.min(100, Math.round(total * 100)));
          progressFill.style.width = percent + "%";
        }
      });

      viewer.addEventListener("load", () => {
        progressFill.style.width = "100%";
        setTimeout(hideOverlay, 250);
      });

      setTimeout(hideOverlay, 20000);
    });
  </script>

</body>
</html>
